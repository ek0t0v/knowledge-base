# CQS и CQRS

- [Что почитать/посмотреть](#что-почитатьпосмотреть)

Основная идея **CQS** (command-query separation) в том, что в объекте методы могут быть двух типов — query (запрос) и command (команда). Запросы возвращают результат, не изменяя состояние объекта. Другими словами, у запросов нет никаких побочных эффектов. Команды изменяют состояние объекта, не возвращая значение.

Принцип **CQRS** (command-query responsibility segregation) гласит, что метод должен быть либо командой, выполняющей какое-то действие, либо запросом, возвращающим данные, но не одновременно.

Если **CQS** оперирует методами, то **CQRS** поднимается на уровень объектов. Для изменения состояния системы создается класс `Command`, а для выборки данных – класс `Query`. Таким образом, мы получаем набор объектов, которые меняют состояние системы, и набор объектов, которые возвращают данные.

Что это дает?

- разделение на подсистемы чтения и записи позволяет выдерживать более высокую нагрузку и ее несимметричное распределение, позволяет использовать разные (более подходящие) хранилища для чтения и записи
- на стороне чтения можно создавать структуры данных заточенные под потребителя, нормализация не нужна

## Что почитать/посмотреть

- [Command return values](https://stackoverflow.com/questions/43433318/cqrs-command-return-values)
- [How to validate commands in a CQRS application](https://danielwhittaker.me/2016/04/20/how-to-validate-commands-in-a-cqrs-application)
